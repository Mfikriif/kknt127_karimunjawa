import{K as g,r as m,j as e,S as x}from"./app-DVC3gXed.js";import{A as j,a as f}from"./AdminSidebar-C80Xw8we.js";function y(){const{props:c}=g(),n=c.processingMethod,[o,p]=m.useState(n.judul),[l,h]=m.useState(n.steps.map(a=>({...a,new_gambar:null,preview:a.gambar_tahapan?`/storage/${a.gambar_tahapan}`:""}))),d=(a,r,t)=>{const s=[...l];if(r==="new_gambar"){const i=t,b=i?URL.createObjectURL(i):s[a].preview;s[a]={...s[a],new_gambar:i,preview:b}}else s[a]={...s[a],[r]:t};h(s)},u=a=>{a.preventDefault();const r=new FormData;r.append("judul",o),l.forEach((t,s)=>{r.append(`steps[${s}][tahap_ke]`,t.tahap_ke.toString()),r.append(`steps[${s}][deskripsi_tahapan]`,t.deskripsi_tahapan||""),t.new_gambar&&r.append(`steps[${s}][gambar_tahapan]`,t.new_gambar)}),r.append("_method","put"),x.post(`/admin/processing-methods/${n.id}`,r,{forceFormData:!0})};return e.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[e.jsx(j,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(f,{}),e.jsxs("main",{className:"p-6 md:p-10",children:[e.jsx("div",{className:"max-w-3xl mx-auto mb-6",children:e.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"Edit Metode Pengolahan"})}),e.jsx("div",{className:"max-w-3xl mx-auto bg-white p-8 rounded-xl shadow-md",children:e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Judul Metode"}),e.jsx("input",{name:"judul",type:"text",value:o,onChange:a=>p(a.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Masukkan judul metode..."})]}),l.map((a,r)=>e.jsxs("div",{className:"border border-gray-200 bg-gray-50 rounded-lg p-5 shadow-sm",children:[e.jsxs("h2",{className:"font-semibold text-lg mb-4 text-gray-700",children:["🧩 Tahap ",a.tahap_ke]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Deskripsi Tahapan"}),e.jsx("textarea",{value:a.deskripsi_tahapan,onChange:t=>d(r,"deskripsi_tahapan",t.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 h-24 resize-y focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Deskripsikan tahapan ini..."})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Ganti Gambar Tahapan (opsional)"}),a.preview&&e.jsx("img",{src:a.preview,alt:`Preview ${a.tahap_ke}`,className:"mb-3 rounded-md w-48 object-cover"}),e.jsxs("label",{className:"inline-flex items-center gap-3 cursor-pointer bg-white border border-gray-300 rounded-lg px-4 py-2 text-sm shadow-sm hover:bg-gray-100 transition",children:[e.jsx("span",{className:"text-gray-700",children:"📁 Pilih Gambar"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>{var s;return d(r,"new_gambar",((s=t.target.files)==null?void 0:s[0])||null)},className:"hidden"})]})]})]},a.id)),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"inline-flex items-center gap-2 bg-blue-900 hover:bg-blue-950 text-white px-6 py-2 rounded-lg shadow transition",children:"Simpan"})})]})})]})]})]})}export{y as default};
