import{r as l,S as y,j as e,L as ee,$ as te}from"./app-C5qA5Vgc.js";import{U as re,I as se,E as ae,a as ne}from"./umkm-footer-BeQsnmFM.js";import{U as le}from"./users-Byq8al1Z.js";import{S as ie,F as oe}from"./shopping-bag-Dmr1HCqZ.js";import{S as z}from"./search-C83SjCo_.js";import{C as ce}from"./clock-BNdGe6Wr.js";import{M as de}from"./map-pin-COmbtzqW.js";import{P as me,S as he}from"./star-CS215J_v.js";import{C as xe}from"./chevron-left-Dr7gSHEs.js";import{C as ue}from"./chevron-right-BaiLaG5w.js";import{F as pe}from"./filter-DeKTQLzj.js";import"./x-BHy9tUBc.js";import"./createLucideIcon-CXbrjRoD.js";import"./menu-cWills4r.js";const be=()=>{const[F,S]=l.useState({width:typeof window<"u"?window.innerWidth:1024,height:typeof window<"u"?window.innerHeight:768});return l.useEffect(()=>{let d;const k=()=>{clearTimeout(d),d=setTimeout(()=>{S({width:window.innerWidth,height:window.innerHeight})},100)};return window.addEventListener("resize",k),()=>{window.removeEventListener("resize",k),clearTimeout(d)}},[]),F};function Ce({umkms:F,categories:S,filters:d,currentCategory:k,current_category:I,search_query:R,stats:C,per_page:P}){var L,E;const H=k||I||"Semua",B=R||(d==null?void 0:d.search)||"",[h,O]=l.useState(B),[i,J]=l.useState(H),[W,g]=l.useState(!1),[$,Y]=l.useState(!1),{width:x}=be(),j=x<=1024,u=x<=768,q=l.useRef(null),v=l.useCallback(t=>t<=1024?6:12,[]),[p,A]=l.useState(()=>P||v(x));l.useEffect(()=>{if(!$)return;const t=v(x),r=new URLSearchParams(window.location.search),s=parseInt(r.get("per_page")||"12");t!==s&&t!==p&&(A(t),g(!0),y.get("/umkm/list-umkm",{category:i,search:h,per_page:t},{preserveState:!0,preserveScroll:!0,only:["umkms"],onSuccess:()=>{g(!1)},onError:()=>{g(!1)}}))},[x,$,i,h,p,v]),l.useEffect(()=>{const t=v(x),r=new URLSearchParams(window.location.search),s=parseInt(r.get("per_page")||"12"),a=setTimeout(()=>{Y(!0),s!==t?(A(t),y.get("/umkm/list-umkm",{category:i,search:h,per_page:t},{preserveState:!0,preserveScroll:!0,only:["umkms"],replace:!0})):A(s)},200);return()=>clearTimeout(a)},[v,x,i,h]);const n=l.useMemo(()=>F||{data:[],meta:{current_page:1,last_page:1,from:0,to:0,total:0,per_page:p},links:[]},[F,p]),N=l.useMemo(()=>S||[],[S]),U=l.useMemo(()=>d||{},[d]),T=l.useMemo(()=>C||{total_umkm:n.data.length,total_products:0},[C,n]),G=t=>t.display_photos&&t.display_photos.length>0?{type:"photo",src:`/storage/umkm/display/${t.display_photos[0]}`,alt:t.name}:t.menu_photo?{type:"photo",src:`/storage/umkm/menu/${t.menu_photo}`,alt:`${t.name} - Menu`}:{type:"emoji",src:t.image||"ðŸª",alt:t.name},Q=t=>{if(!t.opening_hours)return"08:00-17:00";const s=["minggu","senin","selasa","rabu","kamis","jumat","sabtu"][new Date().getDay()],a=t.opening_hours[s];return a&&a.is_open?`${a.open_time}-${a.close_time}`:"Tutup"},V=t=>Array.from({length:5},(r,s)=>e.jsx(he,{className:`w-4 h-4 ${s<t?"text-[#FFD700] fill-current":"text-white/30"}`},s)),X=t=>{t.preventDefault(),y.get("/umkm/list-umkm",{category:i,search:h,per_page:p},{preserveState:!0,preserveScroll:!0})},K=t=>{J(t),y.get("/umkm/list-umkm",{category:t,search:h,per_page:p},{preserveState:!0,preserveScroll:!0})},D=t=>{if(t){const r=window.scrollY;g(!0);const s=new URL(t,window.location.origin),a=new URLSearchParams(s.search);a.set("per_page",p.toString());const m=`${s.pathname}?${a.toString()}`;y.get(m,{},{preserveState:!0,preserveScroll:!0,only:["umkms"],onSuccess:()=>{g(!1)},onError:()=>{g(!1),window.scrollTo(0,r)}})}},M=l.useMemo(()=>N.some(r=>r.name==="Semua")?N:[{name:"Semua",count:N.reduce((s,a)=>s+a.count,0)||n.data.length},...N],[N,n.data]);return e.jsxs(e.Fragment,{children:[e.jsx(ee,{title:`UMKM ${i==="Semua"?"Semua Kategori":i} - Desa Kemujan`}),e.jsx(re,{activeMenu:"umkm-unggulan"}),e.jsxs("div",{className:"min-h-screen bg-[rgb(12,52,76)] pt-4",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12 pt-16",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"UMKM Unggulan Desa Kemujan, Karimun Jawa"}),e.jsx("p",{className:"text-lg text-white/80 max-w-3xl mx-auto",children:"Berikut adalah usaha mikro, kecil, dan menengah terbaik di Desa Kemujan yang telah dipilih berdasarkan kualitas produk, pelayanan, dan kontribusi terhadap ekonomi lokal."})]}),e.jsxs("div",{className:"items-center justify-center grid grid-cols-2 md:grid-cols-2 gap-6 mb-12",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 text-center shadow-lg ",children:[e.jsx("div",{className:"w-12 h-12 bg-[#64FFDA]/20 rounded-lg flex items-center justify-center mx-auto mb-3",children:e.jsx(le,{className:"w-6 h-6 text-[#64FFDA]"})}),e.jsxs("div",{className:"text-2xl font-bold text-[#64FFDA] mb-1",children:[T.total_umkm,"+"]}),e.jsx("div",{className:"text-sm text-white/80",children:"Total UMKM"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 text-center shadow-lg ",children:[e.jsx("div",{className:"w-12 h-12 bg-[#64FFDA]/20 rounded-lg flex items-center justify-center mx-auto mb-3",children:e.jsx(ie,{className:"w-6 h-6 text-[#64FFDA]"})}),e.jsxs("div",{className:"text-2xl font-bold text-[#64FFDA] mb-1",children:[T.total_products,"+"]}),e.jsx("div",{className:"text-sm text-white/80",children:"Jenis Produk"})]})]}),e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl shadow-lg p-6 mb-8 ",children:e.jsx("div",{className:"flex flex-col lg:flex-row gap-6",children:e.jsx("div",{className:"flex-1",children:e.jsxs("form",{onSubmit:X,className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/60",size:20}),e.jsx("input",{type:"text",value:h,onChange:t=>O(t.target.value),placeholder:"Cari UMKM berdasarkan nama, pemilik, atau produk...",className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:ring-2 focus:ring-[#64FFDA] focus:border-transparent text-white placeholder-white/60 backdrop-blur-sm"})]}),e.jsxs("button",{type:"submit",className:"bg-[#64FFDA] text-[rgb(12,52,76)] px-6 py-3 rounded-lg transition-all duration-300 flex items-center gap-2 font-semibold hover:scale-105",children:[e.jsx(z,{size:20}),e.jsx("span",{className:`${u?"hidden":"block"}`,children:"Cari"})]})]})})})}),M&&M.length>1&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"px-4 py-3",children:e.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:e.jsx("div",{className:"flex justify-center gap-4 min-w-max mx-auto w-fit mt-4 mb-12 px-2",children:M.map(t=>e.jsxs("button",{onClick:()=>K(t.name),className:`group flex items-center space-x-3 px-6 py-3 rounded-full font-medium transition-all duration-300 shadow-lg backdrop-blur-md whitespace-nowrap ${i===t.name?"bg-[#64FFDA] text-[rgb(12,52,76)] border border-[#64FFDA] scale-105":"bg-white/10 text-white border border-white/20 hover:bg-white/15 hover:border-[#64FFDA]/40 hover:shadow-xl hover:shadow-[#64FFDA]/40"}`,children:[e.jsx("span",{className:"text-sm",children:t.name}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${i===t.name?"bg-[rgb(12,52,76)] text-[#64FFDA]":"bg-white/20 text-white"}`,children:t.count})]},t.name))})})}),e.jsx("div",{className:"md:hidden text-center mt-4",children:e.jsx("p",{className:"text-xs text-white/60",children:"â† Geser untuk melihat kategori lainnya â†’"})})]}),e.jsx("div",{className:"mb-6 text-center",children:e.jsxs("p",{className:"text-white/80",children:["Menampilkan ",n.data.length," UMKM",i!=="Semua"&&` dalam kategori "${i}"`,U.search&&` untuk pencarian "${U.search}"`]})}),n.data.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:n.data.map(t=>{const r=G(t),s=Q(t);return e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden group flex flex-col h-full border border-white/20 hover:border-[#64FFDA]/40",children:[e.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-white/5 to-white/10",children:[r.type==="photo"?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:r.src,alt:r.alt,className:"w-full h-full object-cover",onError:a=>{var c;const m=a.currentTarget;m.style.display="none";const o=(c=m.parentElement)==null?void 0:c.querySelector(".emoji-fallback");o&&o.classList.remove("hidden")}}),e.jsx("div",{className:"emoji-fallback hidden w-full h-full flex items-center justify-center absolute inset-0",children:e.jsx("span",{className:"text-6xl",children:t.image||"ðŸª"})})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-6xl",children:r.src})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:"Aktif"})}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-gray-800 bg-white/90 text-gray-800 backdrop-blur-sm border border-gray-200",children:[e.jsx(ce,{className:"w-3 h-3 mr-1"}),s]})})]}),e.jsxs("div",{className:"p-6 flex-grow flex flex-col",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-bold text-white text-lg truncate group-hover:text-[#64FFDA] transition-colors",children:t.name}),e.jsx("p",{className:"text-sm text-white/80 truncate",children:t.owner}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[V(t.rating),e.jsxs("span",{className:"text-xs text-white/60 ml-1",children:["(",t.rating,")"]})]})]})}),e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:"inline-block bg-[#64FFDA]/20 text-[#64FFDA] text-xs px-2 py-1 rounded-full font-medium border border-[#64FFDA]/30",children:t.category})}),e.jsx("div",{className:"mb-4 flex-shrink-0",children:e.jsx("p",{className:"text-white/70 text-sm leading-relaxed h-12 overflow-hidden",children:e.jsx("span",{className:"line-clamp-3",children:t.description})})}),e.jsxs("div",{className:"flex items-start space-x-2 mb-4 flex-shrink-0",children:[e.jsx(de,{className:"w-4 h-4 text-white/60 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-white/70 line-clamp-2 leading-relaxed",children:t.address})]}),e.jsxs("div",{className:"mb-4 flex-shrink-0",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Produk:"}),e.jsx("div",{className:"flex flex-wrap gap-1 min-h-[2rem]",children:t.products&&t.products.length>0?e.jsxs(e.Fragment,{children:[t.products.slice(0,3).map((a,m)=>e.jsx("span",{className:"inline-block bg-white/10 text-white text-xs px-2 py-1 rounded truncate max-w-[120px] border border-white/20",title:a,children:a},m)),t.products.length>3&&e.jsxs("span",{className:"inline-block bg-white/10 text-white text-xs px-2 py-1 rounded border border-white/20",children:["+",t.products.length-3," lainnya"]})]}):e.jsx("span",{className:"text-xs text-white/60",children:"Tidak ada produk tersedia"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-auto pt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[e.jsx(me,{className:"w-4 h-4 text-white/60 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-white/70 truncate",children:t.contact})]}),e.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 ml-2",children:[t.instagram&&e.jsx("a",{href:t.instagram,target:"_blank",rel:"noopener noreferrer",className:"text-pink-400 hover:text-pink-300 transition-colors",children:e.jsx(se,{className:"w-4 h-4"})}),t.facebook&&e.jsx("a",{href:t.facebook,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",children:e.jsx(oe,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-white/20",children:e.jsxs("p",{className:"text-xs text-white/60",children:["Bergabung: ",new Date(t.created_at).toLocaleDateString("id-ID")]})})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-sm px-6 py-4 mt-auto flex-shrink-0 border-t border-white/20",children:e.jsxs(te,{href:`/umkm/${t.id}`,className:"inline-flex items-center justify-center space-x-2 text-white hover:text-[#64FFDA] font-medium text-sm transition-colors w-full group",children:[e.jsx("span",{children:"Lihat Detail"}),e.jsx(ae,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})})]},t.id)})}),n.links&&n.links.length>3&&e.jsx("div",{ref:q,className:`bg-white/10 backdrop-blur-md rounded-lg shadow-lg p-4 md:p-6 border border-white/20 transition-opacity duration-300 ${W?"opacity-60 pointer-events-none":"opacity-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:`${j?"hidden":"block"} text-sm text-white/80`,children:["Halaman ",((L=n.meta)==null?void 0:L.current_page)||1," dari ",((E=n.meta)==null?void 0:E.last_page)||1]}),e.jsxs("div",{className:`flex items-center justify-center ${j?"w-full":""} gap-2`,children:[n.links.map((t,r)=>t.label.includes("Previous")?e.jsxs("button",{onClick:()=>t.url&&D(t.url),disabled:!t.url,className:`${u?"min-w-[36px] h-10 justify-center":j?"px-3 py-2 text-sm font-medium":"px-3 py-2 text-sm"} rounded-lg flex items-center gap-2 transition-all duration-300 backdrop-blur-md border ${t.url?"bg-white/10 hover:bg-white/15 text-white border-white/20 hover:border-[#64FFDA]/40":"bg-white/5 text-white/40 cursor-not-allowed border-white/10"}`,children:[e.jsx(xe,{size:16}),!u&&e.jsx("span",{children:"Sebelumnya"})]},r):null),e.jsx("div",{className:"flex items-center gap-1",children:(()=>{var a,m;const t=((a=n.meta)==null?void 0:a.current_page)||1,r=((m=n.meta)==null?void 0:m.last_page)||1,s=n.links.slice(1,-1);if(j){const o=[],c=u?3:5;let f=Math.max(1,t-Math.floor(c/2)),_=Math.min(r,f+c-1);_-f<c-1&&(f=Math.max(1,_-c+1));for(let w=f;w<=_;w++){const b=s.find(Z=>Z.label===w.toString());o.push(e.jsx("button",{onClick:()=>(b==null?void 0:b.url)&&D(b.url),disabled:!(b!=null&&b.url),className:`${u?"min-w-[32px] h-8 text-xs":"min-w-[40px] h-10 text-sm"} rounded-lg font-medium backdrop-blur-md transition-all duration-300 flex items-center justify-center border ${w===t?"bg-[#64FFDA] text-[rgb(12,52,76)] border-[#64FFDA] font-bold shadow-lg":"bg-white/10 hover:bg-white/15 text-white border-white/20 hover:border-[#64FFDA]/40"}`,children:w},w))}return o}else return s.map((o,c)=>{if(o.label==="...")return e.jsx("span",{className:"px-2 text-white/60",children:"..."},c);const f=o.active;return e.jsx("button",{onClick:()=>o.url&&D(o.url),disabled:!o.url,className:`px-3 py-2 text-sm rounded-lg backdrop-blur-md transition-all duration-300 border ${f?"bg-[#64FFDA] text-[rgb(12,52,76)] border-[#64FFDA] font-bold shadow-lg":"bg-white/10 hover:bg-white/15 text-white border-white/20 hover:border-[#64FFDA]/40"}`,children:o.label},c)})})()}),n.links.map((t,r)=>t.label.includes("Next")?e.jsxs("button",{onClick:()=>t.url&&D(t.url),disabled:!t.url,className:`${u?"min-w-[36px] h-10 justify-center":j?"px-3 py-2 text-sm font-medium":"px-3 py-2 text-sm"} rounded-lg flex items-center gap-2 transition-all duration-300 backdrop-blur-md border ${t.url?"bg-white/10 hover:bg-white/15 text-white border-white/20 hover:border-[#64FFDA]/40":"bg-white/5 text-white/40 cursor-not-allowed border-white/10"}`,children:[!u&&e.jsx("span",{children:"Selanjutnya"}),e.jsx(ue,{size:16})]},r):null)]})]})})]}):e.jsxs("div",{className:"text-center py-12 mb-12",children:[e.jsx("div",{className:"w-24 h-24 bg-white/10 border border-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm",children:e.jsx(pe,{className:"w-12 h-12 text-white/60"})}),e.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:i!=="Semua"?`Tidak Ada UMKM dalam Kategori "${i}"`:"Belum Ada UMKM Unggulan"}),e.jsx("p",{className:"text-white/80 mb-6",children:i!=="Semua"?"Coba pilih kategori lain atau lihat semua UMKM.":"UMKM unggulan akan ditampilkan di sini setelah admin menambahkannya."}),e.jsx("button",{onClick:()=>K("Semua"),className:"group relative inline-flex items-center space-x-2 transform overflow-hidden rounded-lg border border-white/30 bg-white/5 px-6 py-3 text-white shadow-lg backdrop-blur-md transition-all duration-500 ease-in-out before:absolute before:inset-0 before:rounded-lg before:bg-gradient-to-br before:from-transparent before:via-transparent before:to-transparent before:opacity-0 before:transition-all before:duration-500 hover:scale-[1.03] hover:border-[#64FFDA] hover:shadow-[#64FFDA]/30 hover:before:from-[#64FFDA]/10 hover:before:to-transparent hover:before:opacity-100",children:i!=="Semua"?"Reset Filter":"Lihat Semua UMKM"})]})]}),e.jsx(ne,{})]})]})}export{Ce as default};
