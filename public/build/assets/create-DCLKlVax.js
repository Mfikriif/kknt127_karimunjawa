import{m as B,r as j,j as e,L as J}from"./app-rpAYq68g.js";import{A as L,a as q}from"./AdminSidebar-O6SuWDjW.js";import{X as p}from"./x-DraAK9FV.js";import{P as I}from"./plus-3BjG7qLn.js";import{I as E,U as N}from"./upload-DhltqPLC.js";import{C as O}from"./clock-DP0gaX32.js";import"./createLucideIcon-BHl37ZrR.js";function Q({categories:v,defaultOpeningHours:w}){const{data:t,setData:n,post:k,processing:u,errors:l}=B({name:"",owner:"",category:"",description:"",address:"",products:[""],contact:"",rating:0,image:"🏪",price_range:"",display_photos:[],menu_photo:null,instagram:"",facebook:"",opening_hours:w,is_active:!0}),[m,g]=j.useState([]),[h,b]=j.useState(null),_=a=>{a.preventDefault();const s=new FormData;Object.keys(t).forEach(r=>{if(r==="display_photos"||r==="menu_photo")return;const o=t[r];Array.isArray(o)?r==="products"?o.forEach((i,d)=>{s.append(`${r}[${d}]`,i)}):s.append(r,JSON.stringify(o)):typeof o=="boolean"?s.append(r,o?"1":"0"):o!=null&&s.append(r,o.toString())}),t.display_photos.forEach((r,o)=>{s.append(`display_photos[${o}]`,r)}),t.menu_photo&&s.append("menu_photo",t.menu_photo),k(route("admin.umkm.store"),{forceFormData:!0})},M=()=>{n("products",[...t.products,""])},P=a=>{const s=t.products.filter((r,o)=>o!==a);n("products",s)},C=(a,s)=>{const r=[...t.products];r[a]=s,n("products",r)},x=(a,s,r)=>{const o={...t.opening_hours,[a]:{...t.opening_hours[a],[s]:r}};n("opening_hours",o)},U=a=>{const s=Array.from(a.target.files||[]),r=t.display_photos;if(r.length+s.length>3){alert("Maksimal 3 foto display");return}const i=[...r,...s];n("display_photos",i);const d=[...m];s.forEach(c=>{const y=new FileReader;y.onload=R=>{var f;d.push((f=R.target)==null?void 0:f.result),g([...d])},y.readAsDataURL(c)})},K=a=>{const s=t.display_photos.filter((o,i)=>i!==a),r=m.filter((o,i)=>i!==a);n("display_photos",s),g(r)},A=a=>{var r;const s=(r=a.target.files)==null?void 0:r[0];if(s){n("menu_photo",s);const o=new FileReader;o.onload=i=>{var d;b((d=i.target)==null?void 0:d.result)},o.readAsDataURL(s)}},S=()=>{n("menu_photo",null),b(null)},D=[{key:"senin",label:"Senin"},{key:"selasa",label:"Selasa"},{key:"rabu",label:"Rabu"},{key:"kamis",label:"Kamis"},{key:"jumat",label:"Jumat"},{key:"sabtu",label:"Sabtu"},{key:"minggu",label:"Minggu"}],F=["🏪","🍽️","🐟","🦐","🌊","🧺","⚒️","🔧"];return e.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-sans",children:[e.jsx(J,{title:"Tambah UMKM"}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                    input, textarea, select {
                        color: #111827 !important;
                    }
                    input::placeholder, textarea::placeholder {
                        color: #6B7280 !important;
                        opacity: 1 !important;
                    }
                    select option {
                        color: #111827 !important;
                    }
                    select option:disabled {
                        color: #9CA3AF !important;
                    }
                    input[type="time"] {
                        color: #111827 !important;
                    }
                    input[type="number"] {
                        color: #111827 !important;
                    }
                `}}),e.jsx(L,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(q,{}),e.jsxs("main",{className:"flex-1 px-8 py-6 max-w-5xl mx-auto w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"Tambah UMKM Baru"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Lengkapi informasi UMKM untuk ditambahkan ke sistem"})]}),e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Informasi Dasar"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Data utama UMKM"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama UMKM *"}),e.jsx("input",{type:"text",value:t.name,onChange:a=>n("name",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",placeholder:"Contoh: Keripik Rumput Laut Sari Rasa",required:!0}),l.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Pemilik *"}),e.jsx("input",{type:"text",value:t.owner,onChange:a=>n("owner",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",placeholder:"Contoh: Bu Siti",required:!0}),l.owner&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.owner})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori *"}),e.jsxs("select",{value:t.category,onChange:a=>n("category",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",required:!0,children:[e.jsx("option",{value:"",disabled:!0,style:{color:"#9CA3AF"},children:"Pilih Kategori"}),v.map(a=>e.jsx("option",{value:a,style:{color:"#111827"},children:a},a))]}),l.category&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon UMKM * (Wajib - akan digunakan sebagai display jika tidak ada foto)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:F.map(a=>e.jsx("button",{type:"button",onClick:()=>n("image",a),className:`text-2xl p-2 rounded-lg border transition-colors ${t.image===a?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:a},a))}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Icon akan digunakan sebagai display utama jika tidak ada foto display yang diupload."}),l.image&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.image})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kontak *"}),e.jsx("input",{type:"text",value:t.contact,onChange:a=>n("contact",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",placeholder:"Contoh: +62 812-3456-7890",required:!0}),l.contact&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.contact})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating (0-5)"}),e.jsx("input",{type:"number",min:"0",max:"5",step:"0.1",value:t.rating||"",onChange:a=>n("rating",parseFloat(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",placeholder:"Contoh: 4.5"}),l.rating&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.rating})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kisaran Harga (Opsional)"}),e.jsx("input",{type:"text",value:t.price_range,onChange:a=>n("price_range",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",placeholder:"Contoh: Rp 10.000 - Rp 50.000"}),l.price_range&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.price_range}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Kosongkan jika tidak ingin menampilkan kisaran harga"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi *"}),e.jsx("textarea",{value:t.description,onChange:a=>n("description",a.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",placeholder:"Ceritakan tentang UMKM ini, keunggulan, dan hal menarik lainnya...",required:!0}),l.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.description})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alamat *"}),e.jsx("input",{type:"text",value:t.address,onChange:a=>n("address",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",placeholder:"Contoh: Jl. Pantai Utara No. 12, Kemujan",required:!0}),l.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.address})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Produk"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Daftar produk yang dijual"})]}),e.jsxs("div",{className:"space-y-3",children:[t.products.map((a,s)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:a,onChange:r=>C(s,r.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",placeholder:`Produk ${s+1}`,required:!0}),t.products.length>1&&e.jsx("button",{type:"button",onClick:()=>P(s),className:"text-red-600 hover:text-red-700 p-1",children:e.jsx(p,{className:"w-4 h-4"})})]},s)),e.jsxs("button",{type:"button",onClick:M,className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 text-sm",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{children:"Tambah Produk"})]})]}),l.products&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.products})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{children:"Foto UMKM"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Upload foto untuk menampilkan UMKM Anda"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Foto Display (Maksimal 3 foto)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[m.map((a,s)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a,alt:`Preview ${s+1}`,className:"w-full h-40 object-cover rounded-lg border border-gray-300"}),e.jsx("button",{type:"button",onClick:()=>K(s),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(p,{className:"w-4 h-4"})})]},s)),t.display_photos.length<3&&e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:U,className:"hidden",id:"display-photos"}),e.jsxs("label",{htmlFor:"display-photos",className:"cursor-pointer flex flex-col items-center space-y-2",children:[e.jsx(N,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Upload foto display"}),e.jsx("span",{className:"text-xs text-gray-400",children:"JPG, PNG (Max 5MB)"})]})]})]}),t.display_photos.length===0&&e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:t.image})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Belum ada foto? Gunakan icon sebagai display"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Jika belum memiliki foto UMKM, icon yang dipilih di atas akan digunakan sebagai display utama. Anda dapat menambahkan foto nanti melalui edit UMKM."})]})]})}),l.display_photos&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.display_photos})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Foto Menu/Pricelist (1 foto)"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:h,alt:"Menu Preview",className:"w-full h-40 object-cover rounded-lg border border-gray-300"}),e.jsx("button",{type:"button",onClick:S,className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(p,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:A,className:"hidden",id:"menu-photo"}),e.jsxs("label",{htmlFor:"menu-photo",className:"cursor-pointer flex flex-col items-center space-y-2",children:[e.jsx(N,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Upload foto menu/pricelist"}),e.jsx("span",{className:"text-xs text-gray-400",children:"JPG, PNG (Max 5MB)"})]})]})}),l.menu_photo&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.menu_photo})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{children:"Jam Buka"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Atur jam operasional UMKM"})]}),e.jsx("div",{className:"space-y-4",children:D.map(({key:a,label:s})=>{var r,o,i,d;return e.jsxs("div",{className:"flex items-center space-x-4 p-4 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"w-20",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:((r=t.opening_hours[a])==null?void 0:r.is_open)||!1,onChange:c=>x(a,"is_open",c.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Buka"})]}),((o=t.opening_hours[a])==null?void 0:o.is_open)&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"time",value:((i=t.opening_hours[a])==null?void 0:i.open_time)||"08:00",onChange:c=>x(a,"open_time",c.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"time",value:((d=t.opening_hours[a])==null?void 0:d.close_time)||"17:00",onChange:c=>x(a,"close_time",c.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900"})]})]})]},a)})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Media Sosial"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Link media sosial (opsional)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instagram"}),e.jsx("input",{type:"text",value:t.instagram,onChange:a=>n("instagram",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",placeholder:"@username atau link profil"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Facebook"}),e.jsx("input",{type:"text",value:t.facebook,onChange:a=>n("facebook",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",placeholder:"Nama halaman atau link profil"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Status UMKM"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Pengaturan status aktif"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:t.is_active,onChange:a=>n("is_active",a.target.checked),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-gray-700",children:"UMKM Aktif"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"UMKM yang aktif akan ditampilkan di halaman publik"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:u,className:"bg-blue-900 hover:bg-blue-950 text-white px-6 py-2 rounded-lg transition-colors disabled:opacity-50",children:u?"Menyimpan...":"Simpan UMKM"})]})]})]})]})]})}export{Q as default};
