import{r as h,j as e,L as D,$ as N,S as k}from"./app-rpAYq68g.js";import{U as K,G as A,a as L}from"./umkm-footer-B_DZN0sZ.js";import{c as b}from"./createLucideIcon-BHl37ZrR.js";import{C as P}from"./chevron-left-TxZkxS3I.js";import{C as y}from"./chevron-right-DlUvLhtX.js";import{M as O}from"./map-pin-CM7cEP-P.js";import{P as F,S as H}from"./star-BV4zbd61.js";import{C as E}from"./clock-DP0gaX32.js";import{C as q}from"./circle-check-big-gkl1lSaW.js";import"./x-DraAK9FV.js";import"./menu-eqRAN02R.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],B=b("ArrowLeft",R);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],J=b("BadgeCheck",I);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Z=b("Mail",z);function le({umkm:t,related_umkms:g=[]}){const[c,u]=h.useState(0),[v,j]=h.useState(!1),[x,w]=h.useState(!1),[n,o]=h.useState({name:"",email:"",phone:"",message:"",visit_date:"",visit_time:""}),_=s=>{const a=[];return s.display_photos&&s.display_photos.length>0&&s.display_photos.forEach((l,r)=>{a.push({type:"photo",src:`/storage/umkm/display/${l}`,alt:`${s.name} - Photo ${r+1}`})}),s.menu_photo&&a.push({type:"menu",src:`/storage/umkm/menu/${s.menu_photo}`,alt:`${s.name} - Menu`}),a.length===0&&s.image&&a.push({type:"emoji",src:s.image,alt:`${s.name} - Icon`}),a.length>0?a:[{type:"emoji",src:"🏪",alt:"Default UMKM Icon"}]},$=s=>{if(!s||s.trim().length===0)return"";if(s.includes(`
`))return s.trim();const a=s.trim().replace(/\s+/g," "),l=[],r=/([A-Z][a-zA-Z\s-]*?)\s+(Rp\d+\.?\d*)/g;let d,p="";for(;(d=r.exec(a))!==null;)l.length===0&&(p=a.substring(0,d.index).trim()),l.push(`${d[1].trim()} ${d[2]}`);return p&&l.length>0?`${p}

${l.join(`
`)}`:l.length>0?l.join(`
`):a},f=s=>Array.from({length:5},(a,l)=>e.jsx(H,{className:`w-5 h-5 ${l<s?"text-yellow-400 fill-current":"text-gray-300"}`},l)),C=()=>{if(!t.opening_hours)return"Jam operasional belum tersedia";const a=["minggu","senin","selasa","rabu","kamis","jumat","sabtu"][new Date().getDay()],l=t.opening_hours[a];return l&&l.is_open?`${l.open_time} - ${l.close_time}`:"Tutup hari ini"},S=()=>{if(!t.opening_hours)return[];const s={senin:"Senin",selasa:"Selasa",rabu:"Rabu",kamis:"Kamis",jumat:"Jumat",sabtu:"Sabtu",minggu:"Minggu"};return["senin","selasa","rabu","kamis","jumat","sabtu","minggu"].map(l=>{var d;const r=(d=t.opening_hours)==null?void 0:d[l];return{day:s[l],isOpen:(r==null?void 0:r.is_open)||!1,openTime:(r==null?void 0:r.open_time)||"",closeTime:(r==null?void 0:r.close_time)||"",isToday:l===["minggu","senin","selasa","rabu","kamis","jumat","sabtu"][new Date().getDay()]}})},M=()=>["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"][new Date().getDay()],T=s=>{s.preventDefault(),k.post("/umkm/contact",{...n,umkm_id:t.id},{onSuccess:()=>{j(!1),o({name:"",email:"",phone:"",message:"",visit_date:"",visit_time:""}),alert("Pesan berhasil dikirim!")}})},i=_(t),m=i[c];return e.jsxs(e.Fragment,{children:[e.jsx(D,{title:`${t.name} - UMKM Desa Kemujan`}),e.jsx(K,{activeMenu:""}),e.jsx("div",{className:"min-h-screen bg-[rgb(12,52,76)] pt-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[e.jsxs(N,{href:"/umkm/list-umkm",className:"flex items-center space-x-2 text-white hover:text-[#64FFDA] transition-colors",children:[e.jsx(B,{className:"w-5 h-5"}),e.jsx("span",{children:"Kembali ke Daftar UMKM"})]}),e.jsx("span",{className:"text-white",children:"/"}),e.jsx("span",{className:"text-white/80",children:t.name})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx("div",{className:"bg-white rounded-2xl overflow-hidden shadow-lg",children:e.jsxs("div",{className:"relative h-96 lg:h-[500px] bg-gradient-to-br from-blue-50 to-blue-100",children:[m.type==="emoji"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-8xl lg:text-9xl",children:m.src})}):e.jsx("img",{src:m.src,alt:m.alt,className:"w-full h-full object-cover",onError:s=>{var r;const a=s.currentTarget;a.style.display="none";const l=(r=a.parentElement)==null?void 0:r.querySelector(".emoji-fallback");l&&l.classList.remove("hidden")}}),e.jsx("div",{className:"emoji-fallback hidden w-full h-full flex items-center justify-center absolute inset-0 bg-gradient-to-br from-blue-50 to-blue-100",children:e.jsx("span",{className:"text-8xl lg:text-9xl",children:t.image||"🏪"})}),i.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>u(c>0?c-1:i.length-1),className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/80 backdrop-blur-sm p-2 rounded-full shadow-lg hover:bg-white transition-colors",children:e.jsx(P,{className:"w-5 h-5 text-gray-600"})}),e.jsx("button",{onClick:()=>u(c<i.length-1?c+1:0),className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/80 backdrop-blur-sm p-2 rounded-full shadow-lg hover:bg-white transition-colors",children:e.jsx(y,{className:"w-5 h-5 text-gray-600"})})]}),i.length>1&&e.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/50 text-white px-3 py-1 rounded-full text-sm",children:[c+1," / ",i.length]})]})}),i.length>1&&e.jsx("div",{className:"grid grid-cols-4 gap-3",children:i.map((s,a)=>e.jsx("button",{onClick:()=>u(a),className:`relative h-20 rounded-lg overflow-hidden ${c===a?"ring-2 ring-blue-600":""}`,children:s.type==="emoji"?e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-50 to-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:s.src})}):e.jsx("img",{src:s.src,alt:s.alt,className:"w-full h-full object-cover"})},a))})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg sticky top-24",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informasi Kontak"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(O,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Alamat"}),e.jsx("p",{className:"text-gray-900 text-sm",children:t.address})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(F,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Telepon"}),e.jsx("a",{href:`tel:${t.contact}`,className:"text-blue-600 hover:text-blue-700 transition-colors text-sm",children:t.contact})]})]}),t.email&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Z,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("a",{href:`mailto:${t.email}`,className:"text-blue-600 hover:text-blue-700 transition-colors text-sm",children:t.email})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(E,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Jam Operasional"}),e.jsxs("button",{onClick:()=>w(!x),className:"text-xs text-blue-600 hover:text-blue-700 transition-colors flex items-center space-x-1",children:[e.jsx("span",{children:x?"Sembunyikan":"Lihat Semua"}),e.jsx(y,{className:`w-3 h-3 transition-transform ${x?"rotate-90":""}`})]})]}),x?e.jsx("div",{className:"mt-2 space-y-2 bg-gray-50 rounded-lg p-3",children:S().map((s,a)=>e.jsxs("div",{className:`flex justify-between items-center py-1 px-2 rounded text-sm ${s.isToday?"bg-blue-50 border border-blue-200":""}`,children:[e.jsxs("span",{className:`font-medium ${s.isToday?"text-blue-700":"text-gray-700"}`,children:[s.day,s.isToday&&e.jsx("span",{className:"ml-1 text-xs bg-blue-600 text-white px-1.5 py-0.5 rounded-full",children:"Hari ini"})]}),e.jsx("span",{className:`${s.isOpen?s.isToday?"text-blue-600 font-medium":"text-gray-600":"text-red-500"}`,children:s.isOpen?`${s.openTime} - ${s.closeTime}`:"Tutup"})]},a))}):e.jsx("div",{className:"mt-1",children:e.jsxs("p",{className:"text-gray-900 text-sm font-medium",children:[M()," - ",C()]})})]})]}),t.website&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(A,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Website"}),e.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 transition-colors text-sm",children:t.website})]})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg mb-8",children:[e.jsxs("div",{className:"mb-8 pb-8 border-b border-gray-100",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:t.name}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Pemilik: ",e.jsx("span",{className:"font-medium",children:t.owner})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[f(t.rating),e.jsxs("span",{className:"text-gray-600",children:["(",t.rating,"/5)"]}),t.is_verified&&e.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Verified"})]})]}),t.price_range&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Kisaran Harga"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:t.price_range})]}),e.jsx("div",{className:"mb-0",children:e.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm font-medium",children:t.category})})]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Deskripsi"}),e.jsx("div",{className:"prose prose-lg max-w-none text-gray-700 leading-relaxed whitespace-pre-line",children:$(t.description)}),t.products&&t.products.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Produk & Layanan"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.products.map((s,a)=>e.jsx("span",{className:"bg-blue-50 text-blue-700 px-3 py-2 rounded-lg text-sm font-medium",children:s},a))})]})]}),v&&e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg mb-8 contact-form-slide-in",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:["Kirim Pesan ke ",t.name]}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Lengkap"}),e.jsx("input",{type:"text",required:!0,value:n.name,onChange:s=>o({...n,name:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nomor Telepon"}),e.jsx("input",{type:"tel",required:!0,value:n.phone,onChange:s=>o({...n,phone:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",required:!0,value:n.email,onChange:s=>o({...n,email:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Kunjungan (Opsional)"}),e.jsx("input",{type:"date",value:n.visit_date,onChange:s=>o({...n,visit_date:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Waktu Kunjungan (Opsional)"}),e.jsx("input",{type:"time",value:n.visit_time,onChange:s=>o({...n,visit_time:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pesan"}),e.jsx("textarea",{required:!0,rows:4,value:n.message,onChange:s=>o({...n,message:s.target.value}),placeholder:"Tuliskan pesan Anda untuk UMKM ini...",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Kirim Pesan"}),e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"Batal"})]})]})]}),g&&g.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-8",children:"Tertarik dengan UMKM Serupa?"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.slice(0,3).map(s=>e.jsxs(N,{href:`/umkm/${s.id}`,className:"bg-gray-50 rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden group",children:[e.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-blue-50 to-blue-100",children:[e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-6xl",children:s.image})}),s.is_verified&&e.jsx("div",{className:"absolute bottom-3 left-3",children:e.jsxs("div",{className:"flex items-center space-x-1 text-green-600 bg-white bg-opacity-90 px-2 py-1 rounded-full",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Verified"})]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.owner}),e.jsxs("div",{className:"flex items-center space-x-1 mb-3",children:[f(s.rating),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",s.rating,")"]})]}),e.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:s.category})]})]},s.id))})]})]})}),e.jsx(L,{})]})}export{le as default};
