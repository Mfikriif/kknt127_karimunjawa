import{r as b,j as e,L as H,$ as o,S as i}from"./app-rpAYq68g.js";import{A as P,a as F}from"./AdminSidebar-O6SuWDjW.js";import{P as j}from"./plus-3BjG7qLn.js";import{c}from"./createLucideIcon-BHl37ZrR.js";import{C as L}from"./circle-check-big-gkl1lSaW.js";import{S as O}from"./search-B38t6THQ.js";import{F as E}from"./filter-Df9LDsr7.js";import{C as I}from"./clock-DP0gaX32.js";import{S as z,P as B}from"./star-BV4zbd61.js";import{M as q}from"./map-pin-CM7cEP-P.js";import{C as R}from"./chevron-left-TxZkxS3I.js";import{C as V}from"./chevron-right-DlUvLhtX.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],G=c("CircleX",X);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Q=c("Eye",J);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Y=c("SquarePen",W);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ee=c("Trash2",Z);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ae=c("User",se);function pe({umkms:l,categories:f,filters:t,stats:d}){const[h,N]=b.useState(t.search||""),[g,v]=b.useState(!1),w=s=>s.products?Array.isArray(s.products)?s.products.filter(a=>a&&typeof a=="string"):[]:[],M=s=>{s.preventDefault(),i.get(route("admin.umkm.index"),{...t,search:h})},p=(s,a)=>{const r={...t,[s]:a};a==="all"&&delete r[s],i.get(route("admin.umkm.index"),r)},u=()=>{i.get(route("admin.umkm.index"))},_=s=>{confirm(`Apakah Anda yakin ingin menghapus UMKM "${s.name}"?`)&&i.delete(route("admin.umkm.destroy",s.id),{onSuccess:()=>{}})},C=s=>{i.post(route("admin.umkm.toggle-active",s.id),{},{preserveScroll:!0,onSuccess:()=>{}})},S=s=>new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}),y=s=>{if(!s.opening_hours)return null;const a=new Date().toLocaleDateString("en-US",{weekday:"long"}).toLowerCase(),n={monday:"senin",tuesday:"selasa",wednesday:"rabu",thursday:"kamis",friday:"jumat",saturday:"sabtu",sunday:"minggu"}[a];return s.opening_hours[n]||null},k=s=>{const a=y(s);if(!a||!a.is_open)return!1;const r=new Date,n=r.getHours()*60+r.getMinutes(),[x,m]=a.open_time.split(":").map(Number),[A,U]=a.close_time.split(":").map(Number),$=x*60+m,T=A*60+U;return n>=$&&n<=T},K=s=>s.display_photos&&s.display_photos.length>0?`/storage/umkm/display/${s.display_photos[0]}`:null,D=s=>{const a=y(s);if(!a)return null;const r=k(s);return a.is_open?r?{text:"Buka Sekarang",isOpen:!0}:{text:`${a.open_time}-${a.close_time}`,isOpen:!1}:{text:"Tutup",isOpen:!1}};return e.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-sans",children:[e.jsx(H,{title:"Kelola UMKM"}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                    input, textarea, select {
                        color: #111827 !important;
                    }
                    input::placeholder, textarea::placeholder {
                        color: #6B7280 !important;
                        opacity: 1 !important;
                    }
                    select option {
                        color: #111827 !important;
                    }
                    select option:disabled {
                        color: #9CA3AF !important;
                    }
                    input[type="search"] {
                        color: #111827 !important;
                        background-color: #ffffff !important;
                    }
                `}}),e.jsx(P,{}),e.jsxs("div",{className:"ml-72 flex-1 flex flex-col",children:[e.jsx(F,{}),e.jsxs("main",{className:"flex-1 px-8 py-6 max-w-7xl mx-auto w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"Kelola UMKM"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Kelola data UMKM Desa Kemujan"})]}),e.jsxs(o,{href:route("admin.umkm.create"),className:"bg-blue-900 hover:bg-blue-950 text-white px-5 py-2 text-sm rounded-lg shadow transition flex items-center space-x-2",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{children:"Tambah UMKM"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(ae,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total UMKM"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.total})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(L,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Aktif"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.active})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:e.jsx(G,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tidak Aktif"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.inactive})]})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 mb-4",children:[e.jsx("form",{onSubmit:M,className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:h,onChange:s=>N(s.target.value),placeholder:"Cari UMKM, pemilik, atau alamat...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900"})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>v(!g),className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-gray-700",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:"Filter"})]}),(t.category||t.active||t.search)&&e.jsx("button",{onClick:u,className:"text-sm text-blue-600 hover:text-blue-700",children:"Clear Filters"})]})]}),g&&e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori"}),e.jsxs("select",{value:t.category||"all",onChange:s=>p("category",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",children:[e.jsx("option",{value:"all",style:{color:"#111827"},children:"Semua Kategori"}),f.map(s=>e.jsx("option",{value:s,style:{color:"#111827"},children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status Aktif"}),e.jsxs("select",{value:t.active||"all",onChange:s=>p("active",s.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",children:[e.jsx("option",{value:"all",style:{color:"#111827"},children:"Semua Status"}),e.jsx("option",{value:"true",style:{color:"#111827"},children:"Aktif"}),e.jsx("option",{value:"false",style:{color:"#111827"},children:"Nonaktif"})]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:l.data.map(s=>{const a=D(s),r=K(s),n=w(s);return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-blue-50 to-blue-100",children:[r?e.jsx("img",{src:r,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-4xl",children:s.image})})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.is_active?"Aktif":"Nonaktif"})}),a&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("div",{className:`flex items-center space-x-1 px-2.5 py-1 rounded-full text-xs font-medium ${a.isOpen?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx(I,{className:"w-3 h-3"}),e.jsx("span",{children:a.text})]})}),e.jsx("div",{className:"absolute bottom-3 left-3",children:e.jsxs("div",{className:"flex items-center space-x-1 bg-white/90 backdrop-blur-sm px-2.5 py-1 rounded-full",children:[e.jsx(z,{className:"w-3 h-3 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:s.rating})]})})]}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-1 line-clamp-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.owner}),e.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2.5 py-1 rounded-full font-medium",children:s.category})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2 leading-relaxed",children:s.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-500",children:[e.jsx(q,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-1",children:s.address})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(B,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.contact})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Produk:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:n.length>0?e.jsxs(e.Fragment,{children:[n.slice(0,3).map((x,m)=>e.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-md",children:x},m)),n.length>3&&e.jsxs("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-md",children:["+",n.length-3," lainnya"]})]}):e.jsx("span",{className:"text-xs text-gray-500 italic",children:"Tidak ada produk tersedia"})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{href:route("admin.umkm.show",s.id),className:"text-blue-600 hover:text-blue-700 p-2 rounded-lg hover:bg-blue-50 transition-colors",title:"Lihat Detail",children:e.jsx(Q,{className:"w-4 h-4"})}),e.jsx(o,{href:route("admin.umkm.edit",s.id),className:"text-yellow-600 hover:text-yellow-700 p-2 rounded-lg hover:bg-yellow-50 transition-colors",title:"Edit",children:e.jsx(Y,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(s),className:"text-red-600 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-colors",title:"Hapus",children:e.jsx(ee,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:()=>C(s),className:`text-xs px-3 py-1.5 rounded-lg font-medium transition-colors ${s.is_active?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,title:s.is_active?"Nonaktifkan":"Aktifkan",children:s.is_active?"Disable":"Enable"})})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Dibuat: ",S(s.created_at)]})})]})]},s.id)})}),l.data.length===0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center mb-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🏪"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:t.search||t.category||t.active?"Tidak ada UMKM yang sesuai filter":"Belum ada UMKM"}),e.jsx("p",{className:"text-gray-600 mb-6",children:t.search||t.category||t.active?"Coba ubah kriteria pencarian atau filter Anda":"Mulai tambahkan UMKM untuk mengelola data usaha di Desa Kemujan"}),t.search||t.category||t.active?e.jsx("button",{onClick:u,className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Clear Filters"}):e.jsxs(o,{href:route("admin.umkm.create"),className:"bg-blue-900 hover:bg-blue-950 text-white px-6 py-2 rounded-lg inline-flex items-center space-x-2 transition-colors",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{children:"Tambah UMKM Pertama"})]})]}),l.data.length>0&&l.meta&&l.meta.last_page>1&&e.jsx("div",{className:"bg-white px-6 py-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Menampilkan ",e.jsx("span",{className:"font-medium",children:l.meta.from})," - ",e.jsx("span",{className:"font-medium",children:l.meta.to})," dari ",e.jsx("span",{className:"font-medium",children:l.meta.total})," UMKM"]}),e.jsx("div",{className:"flex items-center space-x-2",children:l.meta.links.map((s,a)=>s.label.includes("Previous")?e.jsxs("button",{onClick:()=>s.url&&i.get(s.url),disabled:!s.url,className:`px-3 py-2 text-sm rounded-lg flex items-center space-x-1 ${s.url?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{children:"Previous"})]},a):s.label.includes("Next")?e.jsxs("button",{onClick:()=>s.url&&i.get(s.url),disabled:!s.url,className:`px-3 py-2 text-sm rounded-lg flex items-center space-x-1 ${s.url?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("span",{children:"Next"}),e.jsx(V,{className:"w-4 h-4"})]},a):e.jsx("button",{onClick:()=>s.url&&i.get(s.url),disabled:!s.url,className:`px-3 py-2 text-sm rounded-lg transition-colors ${s.active?"bg-blue-600 text-white":s.url?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:s.label},a))})]})})]})]})]})}export{pe as default};
